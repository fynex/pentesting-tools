#!/usr/bin/env python3

import re
import itertools
import argparse

parser = argparse.ArgumentParser(description="DESC")
parser.add_argument("-f", "--list", required=True, help="A list of URLs")
parser.add_argument("-d", "--delete-string", default="https?://.*?/", help="sum the integers (default: find the max)")

args = parser.parse_args()

with open(args.list, "r") as f:
    urls_str = f.read()

replace_string = args.delete_string

url_list       = urls_str.split("\n")
url_list       = [e for e in url_list if e]
relative_paths = [re.sub(replace_string, "", e) for e in url_list]
dirs_only      = [e[:e.rfind("/")+1] for e in relative_paths]
split_dirs     = [e.split("/") for e in dirs_only if e]
merged         = set(itertools.chain.from_iterable(split_dirs))
merged         = [e.split("?")[0] for e in merged if e]
cleaned_merged = set([e for e in merged if e])
filtered_nums  = sorted([e for e in cleaned_merged if not re.match(r"^(\d(\.)*)+$", e)])

for dir in filtered_nums:
    print(dir)
